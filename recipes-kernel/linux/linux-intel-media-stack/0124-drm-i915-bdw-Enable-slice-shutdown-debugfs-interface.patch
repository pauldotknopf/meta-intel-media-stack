From 6803a0c4f4e1a5abd2069528aafd612ada9ffa72 Mon Sep 17 00:00:00 2001
From: Zhipeng Gong <zhipeng.gong@intel.com>
Date: Tue, 24 May 2016 02:14:12 -0400
Subject: [PATCH 124/153] drm/i915/bdw: Enable slice shutdown debugfs interface

Enable slice shutdown debugfs interface for BDW.
---
 drivers/gpu/drm/i915/i915_debugfs.c |    2 +-
 drivers/gpu/drm/i915/intel_lrc.c    |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_debugfs.c b/drivers/gpu/drm/i915/i915_debugfs.c
index af8ed6f..ef09fdf 100644
--- a/drivers/gpu/drm/i915/i915_debugfs.c
+++ b/drivers/gpu/drm/i915/i915_debugfs.c
@@ -5849,7 +5849,7 @@ i915_slice_enabled_set(void *data, u64 val)
 	struct intel_device_info *info;
 
 	info = (struct intel_device_info *)&dev_priv->info;
-	if (!IS_SKYLAKE(dev) || !info->has_slice_pg)
+	if (!info->has_slice_pg)
 		return -EINVAL;
 
 	if (val > info->slice_total || val <= 0)
diff --git a/drivers/gpu/drm/i915/intel_lrc.c b/drivers/gpu/drm/i915/intel_lrc.c
index f1f95db..a7095e1 100644
--- a/drivers/gpu/drm/i915/intel_lrc.c
+++ b/drivers/gpu/drm/i915/intel_lrc.c
@@ -2380,7 +2380,7 @@ make_rpcs(struct drm_device *dev)
 	 * No explicit RPCS request is needed to ensure full
 	 * slice/subslice/EU enablement prior to Gen9.
 	*/
-	if (INTEL_INFO(dev)->gen < 9)
+	if (INTEL_INFO(dev)->gen < 8)
 		return 0;
 
 	/*
-- 
1.7.1

